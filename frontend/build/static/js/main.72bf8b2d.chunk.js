(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),o=a.n(l),c=a(3),i=a(1);const m=Object(n.createContext)(),u=e=>{let{children:t}=e;const[a,l]=Object(n.useState)(null);Object(n.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user"));e&&l(e)},[]);return r.a.createElement(m.Provider,{value:{user:a,login:e=>{localStorage.setItem("user",JSON.stringify(e)),l(e)},logout:()=>{localStorage.removeItem("user"),l(null)}}},t)},s=()=>Object(n.useContext)(m);var p=()=>{const{user:e,logout:t}=s(),a=Object(i.q)();return r.a.createElement("nav",{style:{padding:"10px",background:"#222",color:"white"}},r.a.createElement(c.b,{to:"/"},"Home")," ",e?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{to:"/profile"},"Profilo")," ",r.a.createElement("button",{onClick:()=>{t(),a("/login")}},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.b,{to:"/login"},"Login")," ",r.a.createElement(c.b,{to:"/register"},"Registrati")))};var E=()=>{const[e,t]=Object(n.useState)(""),[a,l]=Object(n.useState)(""),{login:o}=s(),c=Object(i.q)();return r.a.createElement("div",{style:{maxWidth:"400px",margin:"60px auto"}},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:async t=>{t.preventDefault();try{const t=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})}),r=await t.json();t.ok?(o(r),c("/profile")):alert(r.message)}catch(n){console.error("Errore di rete")}}},r.a.createElement("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value),required:!0}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",placeholder:"Password",value:a,onChange:e=>l(e.target.value),required:!0}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Login")))};var g=()=>{const[e,t]=Object(n.useState)(""),[a,l]=Object(n.useState)(""),[o,c]=Object(n.useState)(""),m=Object(i.q)();return r.a.createElement("div",{style:{maxWidth:"400px",margin:"60px auto"}},r.a.createElement("h2",null,"Registrazione"),r.a.createElement("form",{onSubmit:async t=>{t.preventDefault();try{const t=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a,nickname:o,avatar:""})}),r=await t.json();t.ok?(alert("Registrazione completata!"),m("/login")):alert(r.message)}catch(n){console.error("Errore di rete")}}},r.a.createElement("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value),required:!0}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",placeholder:"Password (6-16 caratteri)",value:a,onChange:e=>l(e.target.value),required:!0}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",placeholder:"Nickname",value:o,onChange:e=>c(e.target.value),required:!0}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Registrati")))};var d=()=>{const{user:e}=s();return e?r.a.createElement("div",{style:{textAlign:"center",marginTop:"50px"}},r.a.createElement("h1",null,"Profilo Utente"),r.a.createElement("img",{src:e.avatar||"https://api.dicebear.com/7.x/adventurer/svg",alt:"Avatar",style:{width:"100px",height:"100px",borderRadius:"50%"}}),r.a.createElement("h2",null,e.nickname||"Anonimo"),r.a.createElement("p",null,"Email: ",e.email)):r.a.createElement("h2",null,"Non sei loggato")},b=a(5);var h=()=>r.a.createElement(u,null,r.a.createElement(c.a,null,r.a.createElement(p,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",element:r.a.createElement(i.a,{to:"/login"})}),r.a.createElement(i.b,{path:"/login",element:r.a.createElement(E,null)}),r.a.createElement(i.b,{path:"/register",element:r.a.createElement(g,null)}),r.a.createElement(i.b,{path:"/profile",element:r.a.createElement(d,null)}),r.a.createElement(i.b,{path:"*",element:r.a.createElement("h1",null,"404 - Pagina non trovata")})),r.a.createElement(b.a,null)));a(16),a(17);o.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0}},r.a.createElement(u,null,r.a.createElement(b.a,{position:"top-center",autoClose:3e3}),r.a.createElement(h,null)))))},8:function(e,t,a){e.exports=a(18)}},[[8,1,2]]]);
//# sourceMappingURL=main.72bf8b2d.chunk.js.map